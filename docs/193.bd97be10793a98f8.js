"use strict";(self.webpackChunkcountries_app=self.webpackChunkcountries_app||[]).push([[193],{9193:(D,f,a)=>{a.r(f),a.d(f,{CountriesModule:()=>Y});var u=a(6814),d=a(86),e=a(4946),m=a(4435),b=a(8645),S=a(7394);class _ extends S.w0{constructor(r,t){super()}schedule(r,t=0){return this}}const h={setInterval(n,r,...t){const{delegate:s}=h;return s?.setInterval?s.setInterval(n,r,...t):setInterval(n,r,...t)},clearInterval(n){const{delegate:r}=h;return(r?.clearInterval||clearInterval)(n)},delegate:void 0};var A=a(9039);const y={now:()=>(y.delegate||Date).now(),delegate:void 0};class p{constructor(r,t=p.now){this.schedulerActionCtor=r,this.now=t}schedule(r,t=0,s){return new this.schedulerActionCtor(this,r).schedule(s,t)}}p.now=y.now;const T=new class I extends p{constructor(r,t=p.now){super(r,t),this.actions=[],this._active=!1}flush(r){const{actions:t}=this;if(this._active)return void t.push(r);let s;this._active=!0;do{if(s=r.execute(r.state,r.delay))break}while(r=t.shift());if(this._active=!1,s){for(;r=t.shift();)r.unsubscribe();throw s}}}(class Z extends _{constructor(r,t){super(r,t),this.scheduler=r,this.work=t,this.pending=!1}schedule(r,t=0){var s;if(this.closed)return this;this.state=r;const o=this.id,i=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(i,o,t)),this.pending=!0,this.delay=t,this.id=null!==(s=this.id)&&void 0!==s?s:this.requestAsyncId(i,this.id,t),this}requestAsyncId(r,t,s=0){return h.setInterval(r.flush.bind(r,this),s)}recycleAsyncId(r,t,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return t;null!=t&&h.clearInterval(t)}execute(r,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(r,t);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(r,t){let o,s=!1;try{this.work(r)}catch(i){s=!0,o=i||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:r,scheduler:t}=this,{actions:s}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,A.P)(s,this),null!=r&&(this.id=this.recycleAsyncId(t,r,null)),this.delay=null,super.unsubscribe()}}});var x=a(9360),w=a(8251),g=a(95);const U=["searchInput"];function P(n,r){1&n&&(e.TgZ(0,"div",8),e._UZ(1,"i",9),e._uU(2," Select search filter\n"),e.qZA())}let L=(()=>{class n{constructor(t){this.getCountriesService=t,this.searchEmitter=new e.vpe,this.initialValue="",this.inputDebouncer=new b.x,this.initialValue=this.getSearchInput()}ngOnInit(){this.subscription=this.inputDebouncer.pipe(function R(n,r=T){return(0,x.e)((t,s)=>{let o=null,i=null,c=null;const C=()=>{if(o){o.unsubscribe(),o=null;const l=i;i=null,s.next(l)}};function j(){const l=c+n,v=r.now();if(v<l)return o=this.schedule(void 0,l-v),void s.add(o);C()}t.subscribe((0,w.x)(s,l=>{i=l,c=r.now(),o||(o=r.schedule(j,n),s.add(o))},()=>{C(),s.complete()},void 0,()=>{i=o=null}))})}(200)).subscribe(t=>{t.length>0&&(this.searchEmitter.emit(t),this.getCountriesService.setCacheStorage({searchInputValue:t}))})}ngOnDestroy(){this.subscription?.unsubscribe()}sendSearchInput(){return this.searchInput?.nativeElement.value&&(this.searchEmitter.emit(this.searchInput?.nativeElement.value),this.getCountriesService.setCacheStorage({searchInputValue:this.searchInput?.nativeElement.value})),!1}getSearchInput(){return this.getCountriesService.getCacheStorage().searchInputValue?this.getCountriesService.getCacheStorage().searchInputValue:""}resetInput(){return this.searchInput.nativeElement.value="",this.getCountriesService.setCacheStorage({searchInputValue:"Empty"}),!1}verifyInputRadio(){return!this.getCountriesService.getCacheStorage().inputRadioValue}subjectNext(){this.inputDebouncer.next(this.searchInput?.nativeElement.value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["shared-searchbox"]],viewQuery:function(t,s){if(1&t&&e.Gf(U,5),2&t){let o;e.iGM(o=e.CRH())&&(s.searchInput=o.first)}},outputs:{searchEmitter:"searchEmitter"},decls:11,vars:6,consts:[["class","alert alert-warning text-center my-2","role","alert",4,"ngIf"],[1,"mt-4","container-sm"],["for","searchbox",1,"form-label","fw-bold"],["type","text","id","searchbox","name","searchbox",1,"form-control",3,"value","disabled","keyup"],["searchInput",""],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end","my-4"],["type","button",1,"btn","btn-primary","me-md-2",3,"disabled","click"],["type","button",1,"btn","btn-danger",3,"click"],["role","alert",1,"alert","alert-warning","text-center","my-2"],[1,"bi","bi-exclamation-circle-fill","mx-1"]],template:function(t,s){if(1&t&&(e.YNc(0,P,3,0,"div",0),e.TgZ(1,"form",1)(2,"label",2),e._uU(3,"Search countries"),e.qZA(),e.TgZ(4,"input",3,4),e.NdJ("keyup",function(){return s.subjectNext()}),e.qZA(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return s.sendSearchInput()}),e._uU(8," Search "),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return s.resetInput()}),e._uU(10," Reset "),e.qZA()()()),2&t){const o=e.MAs(5);e.Q6J("ngIf",s.verifyInputRadio()),e.xp6(1),e.Udp("max-width",540,"px"),e.xp6(3),e.Q6J("value",s.initialValue)("disabled",s.verifyInputRadio()),e.xp6(3),e.Q6J("disabled",!o.value)}},dependencies:[u.O5,g._Y,g.JL,g.F],encapsulation:2}),n})(),J=(()=>{class n{set setLoadStatus(t){t&&(this.loadStatus=t)}get getLoadStatus(){return this.loadStatus}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["shared-loader"]],inputs:{setLoadStatus:"setLoadStatus"},decls:3,vars:2,consts:[["role","alert",1,"alert","alert-dark","text-center","loader"],["src","assets/three-dots.svg","alt","Loading content","title","Loading content"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e._uU(1," Loading content... "),e._UZ(2,"img",1),e.qZA()),2&t&&(e.xp6(2),e.Udp("width",32,"px"))},styles:[".loader[_ngcontent-%COMP%]{position:fixed;right:8px;bottom:8px}"]}),n})();var k=a(9961);let q=(()=>{class n{set setCountry(t){t&&(this.country=t)}get getCountry(){return this.country}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["countries-search-result"]],inputs:{setCountry:"setCountry"},decls:13,vars:10,consts:[[1,"row"],[1,"col-2"],[3,"setSrc","setAlt","setTitle","setWidth"],[1,"col-3"],[3,"routerLink"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e._UZ(4,"shared-lazy-img",2),e.qZA(),e.TgZ(5,"div",3),e._uU(6),e.qZA(),e.TgZ(7,"div",3),e._uU(8),e.ALo(9,"number"),e.qZA(),e.TgZ(10,"div",1)(11,"a",4),e._uU(12,"More info"),e.qZA()()()),2&t&&(e.xp6(2),e.Oqu(s.getCountry.flag),e.xp6(2),e.Q6J("setSrc",s.getCountry.flags.png)("setAlt",s.getCountry.flags.alt)("setTitle",s.getCountry.name.common)("setWidth",36),e.xp6(2),e.Oqu(s.getCountry.name.common),e.xp6(2),e.Oqu(e.lcZ(9,8,s.getCountry.population)),e.xp6(3),e.Q6J("routerLink","/country/"+s.getCountry.cca3))},dependencies:[d.rH,k.U,u.JJ],encapsulation:2}),n})();function B(n,r){1&n&&e._UZ(0,"countries-search-result",6),2&n&&e.Q6J("setCountry",r.$implicit)}const M=function(n){return{display:n}};let E=(()=>{class n{set setCountries(t){t&&(this.provisionalCountries=t)}constructor(){this.provisionalCountries=[],this.countriesList=[]}ngOnChanges(){this.isCountriesLoaded=!1,setTimeout(()=>{this.countriesList=[...this.provisionalCountries],this.isCountriesLoaded=!0},400)}get getCountries(){return this.countriesList}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["countries-search-list"]],inputs:{setCountries:"setCountries"},features:[e.TTD],decls:14,vars:4,consts:[[1,"container-sm"],[1,"row"],[1,"col-2"],[1,"col-3"],[3,"setCountry",4,"ngFor","ngForOf"],[3,"ngStyle"],[3,"setCountry"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Icon"),e.qZA(),e.TgZ(4,"div",2),e._uU(5,"Flag"),e.qZA(),e.TgZ(6,"div",3),e._uU(7,"Name"),e.qZA(),e.TgZ(8,"div",3),e._uU(9,"Population"),e.qZA(),e.TgZ(10,"div",2),e._uU(11,"More info"),e.qZA()(),e.YNc(12,B,1,1,"countries-search-result",4),e.qZA(),e._UZ(13,"shared-loader",5)),2&t&&(e.xp6(12),e.Q6J("ngForOf",s.getCountries),e.xp6(1),e.Q6J("ngStyle",e.VKq(2,M,s.isCountriesLoaded?"none":"")))},dependencies:[u.sg,u.PC,J,q],encapsulation:2}),n})(),V=(()=>{class n{constructor(t){this.getCountriesService=t,this.emitInputRadioValue(this.getCountriesService.getCacheStorage().inputRadioValue)}verifyAndSendInputRadio(t){return this.emitInputRadioValue(t.value),!1}emitInputRadioValue(t){t&&(this.lastInputValue=t,this.getCountriesService.setCacheStorage({inputRadioValue:t}))}verifyChecked(t){return this.lastInputValue==t.value}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["countries-aside"]],decls:14,vars:3,consts:[[1,"container-sm","d-flex","flex-row","row-wrap","justify-content-center","mt-4"],["role","group","aria-label","Search type filter",1,"btn-group"],["type","radio","name","byCapital","id","byCapital","autocomplete","off","value","byCapital",1,"btn-check",3,"checked","change"],["byCapital",""],["for","byCapital",1,"btn","btn-outline-primary"],["type","radio","name","byCountry","id","byCountry","autocomplete","off","value","byCountry",1,"btn-check",3,"checked","change"],["byCountry",""],["for","byCountry",1,"btn","btn-outline-primary"],["type","radio","name","byRegion","id","byRegion","autocomplete","off","value","byRegion",1,"btn-check",3,"checked","change"],["byRegion",""],["for","byRegion",1,"btn","btn-outline-primary"]],template:function(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),e.NdJ("change",function(){e.CHM(o);const c=e.MAs(3);return e.KtG(s.verifyAndSendInputRadio(c))}),e.qZA(),e.TgZ(4,"label",4),e._uU(5,"By Capital"),e.qZA(),e.TgZ(6,"input",5,6),e.NdJ("change",function(){e.CHM(o);const c=e.MAs(7);return e.KtG(s.verifyAndSendInputRadio(c))}),e.qZA(),e.TgZ(8,"label",7),e._uU(9,"By Country"),e.qZA(),e.TgZ(10,"input",8,9),e.NdJ("change",function(){e.CHM(o);const c=e.MAs(11);return e.KtG(s.verifyAndSendInputRadio(c))}),e.qZA(),e.TgZ(12,"label",10),e._uU(13,"By Region"),e.qZA()()()}if(2&t){const o=e.MAs(3),i=e.MAs(7),c=e.MAs(11);e.xp6(2),e.Q6J("checked",s.verifyChecked(o)),e.xp6(4),e.Q6J("checked",s.verifyChecked(i)),e.xp6(4),e.Q6J("checked",s.verifyChecked(c))}},encapsulation:2}),n})();function F(n,r){if(1&n&&e._UZ(0,"countries-search-list",3),2&n){const t=e.oxw();e.Q6J("setCountries",t.getCountries)}}function N(n,r){1&n&&(e.TgZ(0,"div",4),e._uU(1," No countries found, made a simple search for! "),e.qZA())}const Q=[{path:"",component:(()=>{class n{constructor(t){this.getCountriesService=t,this.countries=[]}ngOnInit(){this.countries=this.getCountriesService.getCacheStorage().countries}receiveSearchInput(t){console.log(t),this.getCountriesService.getCountriesRequest(t).subscribe(s=>{this.countries=s,this.getCountriesService.setCountriesCache(s)})}get getCountries(){return this.countries}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["countries-pages-search"]],decls:5,vars:2,consts:[[3,"searchEmitter"],[3,"setCountries",4,"ngIf","ngIfElse"],["noCountries",""],[3,"setCountries"],["role","alert",1,"alert","alert-secondary"]],template:function(t,s){if(1&t&&(e._UZ(0,"countries-aside"),e.TgZ(1,"shared-searchbox",0),e.NdJ("searchEmitter",function(i){return s.receiveSearchInput(i)}),e.qZA(),e.YNc(2,F,1,1,"countries-search-list",1),e.YNc(3,N,2,0,"ng-template",null,2,e.W1O)),2&t){const o=e.MAs(4);e.xp6(2),e.Q6J("ngIf",s.getCountries.length>0)("ngIfElse",o)}},dependencies:[u.O5,L,E,V],encapsulation:2}),n})()},{path:"by-capital",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["countries-pages-by-capital"]],decls:2,vars:0,template:function(t,s){1&t&&(e.TgZ(0,"p"),e._uU(1,"by-capital works!"),e.qZA())},encapsulation:2}),n})()},{path:"by-country",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["countries-pages-by-country"]],decls:2,vars:0,template:function(t,s){1&t&&(e.TgZ(0,"p"),e._uU(1,"by-country works!"),e.qZA())},encapsulation:2}),n})()},{path:"by-region",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["countries-pages-by-region"]],decls:2,vars:0,template:function(t,s){1&t&&(e.TgZ(0,"p"),e._uU(1,"by-region works!"),e.qZA())},encapsulation:2}),n})()},{path:"**",redirectTo:"/error"}];let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild(Q),d.Bz]}),n})();var X=a(6208);let Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez,O,X.m]}),n})()}}]);